!function(){function e(e){try{if(!e)return!1;try{localStorage.setItem("userAvatar",e),sessionStorage.setItem("userAvatar",e)}catch(e){}const t=document.getElementById("mainNavbar");if(!t)return!1;const a=t.querySelector('a[href="account.html"]');if(!a)return!1;let r=a.querySelector(".avatar-wrapper");r||(r=document.createElement("div"),r.className="avatar-wrapper position-relative",r.style.lineHeight="0",a.innerHTML="",a.appendChild(r));let n=r.querySelector("#userAvatar");if(n||(n=document.createElement("img"),n.id="userAvatar",n.alt="User Avatar",n.className="rounded-circle",n.style.width="32px",n.style.height="32px",n.style.objectFit="cover",r.appendChild(n)),n.src=e,!r.querySelector("#avatar-badge")){const e=document.createElement("span");e.id="avatar-badge",e.className="avatar-badge",r.appendChild(e)}return!0}catch(e){return!1}}function t(){const t=function(){try{return localStorage.getItem("userAvatar")||sessionStorage.getItem("userAvatar")||""}catch(e){return""}}();if(t&&e(t))return!0;const a=document.getElementById("avatar-preview"),r=a&&a.getAttribute("src");return!!(r&&r.length>5&&e(r))}function a(){try{const e=document.getElementById("mainNavbar");if(!e)return;const t=e.querySelector("#avatar-badge");if(!t)return;const a="1"===(localStorage.getItem("userPaid")||sessionStorage.getItem("userPaid"));t.classList.remove("paid","free"),a?(t.classList.add("paid"),t.innerHTML='<i class="fas fa-crown" aria-hidden="true"></i>',t.title="VIP會員"):(t.classList.add("free"),t.innerHTML='<i class="fas fa-star" aria-hidden="true"></i>',t.title="普通會員")}catch(e){}}function r(){if(t())return;let e=0;const a=setInterval(()=>{e++,(t()||e>=8)&&clearInterval(a)},700)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){r(),a()}):(r(),a()),window.addEventListener("storage",function(e){"userPaid"===e.key&&a()})}();